---
title: "Main Processing File"
author: "Kuiyuan Shao"
date: '2022-07-21'
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
#install.packages("devtools")
#devtools::install_github("agnesdeng/mixgb")
#load mixgb
library(mvtnorm)
library(tidyverse)
library(MASS)
source("AutoMI.R")
source("runFun.R")
```

```{r}
set.seed(210818)
Nsim <- 500
n  <- 2000
n2 <- 500

beta <- c(1, 1, 1)
e_U <- c(sqrt(3),sqrt(3))
mx <- 0; sx <- 1; zrange <- 1; zprob <- .5

print_step <- 100
res <- results_est <- list(0)
```


# Mixgb
```{r}
mixgb_NULL <- resultFun(Nsim, n, n2, beta, e_U, mx, sx, 
                      zrange, zprob, print_step, res, results_est, tool = "mixgb", method = NULL)
info_mixgb_NULL <- cal(mixgb_NULL)
  
  
mixgb_1 <- resultFun(Nsim, n, n2, beta, e_U, mx, sx, 
                      zrange, zprob, print_step, res, results_est, tool = "mixgb", method = 1)
info_mixgb_1 <- cal(mixgb_1)

mixgb_2 <- resultFun(Nsim, n, n2, beta, e_U, mx, sx, 
                      zrange, zprob, print_step, res, results_est, tool = "mixgb", method = 2)
info_mixgb_2 <- cal(mixgb_2)
```


# Mice
```{r}
mice_logreg <- resultFun(Nsim, n, n2, beta, e_U, mx, sx, 
                      zrange, zprob, print_step, res, results_est, tool = "mice", method = "logreg")
info_mice_logreg <- cal(mice_logreg)

mice_logreg.boot <- resultFun(Nsim, n, n2, beta, e_U, mx, sx, 
                      zrange, zprob, print_step, res, results_est, tool = "mice", method = "logreg.boot")
info_mice_logreg.boot <- cal(mice_logreg.boot)

mice_cart <- resultFun(Nsim, n, n2, beta, e_U, mx, sx, 
                      zrange, zprob, print_step, res, results_est, tool = "mice", method = "cart")
info_mice_cart <- cal(mice_cart)

mice_rf <- resultFun(Nsim, n, n2, beta, e_U, mx, sx, 
                      zrange, zprob, print_step, res, results_est, tool = "mice", method = "rf")
info_mice_rf <- cal(mice_rf)
```


# MissRanger
```{r}
mranger <- resultFun(Nsim, n, n2, beta, e_U, mx, sx, 
                      zrange, zprob, print_step, res, results_est, tool = "mrangermi", method = NULL)
info_mranger <- cal(mranger)
```